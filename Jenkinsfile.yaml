pipeline:
  agent: any
  tools:
    nodejs: "node"
  stages:
    - stage: "Connexion entre Github et Jenkins"
      steps:
         checkout([$class: 'GitSCM', branches: [[name: '*/main']], extensions: [], userRemoteConfigs: [[credentialsId: 'credGithub', url: 'https://github.com/IsraelNoah/test-nodejs-app.git']]])
    - stage: "Install Dependencies" 
      steps:
         - sh "npm install" 
    - stage: "Running npm"
      steps:
         - sh "npm config ls"
    - stage: "Test" 
      steps:
         - sh "test-nodejs-app"
         - sh "echo 'testing'"
    - stage: "deploy"
      steps: 
         - sh "test-nodejs-app"
         - sh "echo 'deploying application...'"
                                                                                                                          
